<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>DOS、Bands计算以Si为例</title>
    <link href="/2025/09/30/DOS%E3%80%81Bands%E8%AE%A1%E7%AE%97%E4%BB%A5Si%E4%B8%BA%E4%BE%8B/"/>
    <url>/2025/09/30/DOS%E3%80%81Bands%E8%AE%A1%E7%AE%97%E4%BB%A5Si%E4%B8%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h3 id="1、计算流程">1、计算流程</h3><p>基本计算流程：建立模型-》准备QE结构优化文件-》准备赝势以及PBS提交-》进行结构优化-》准备自洽计算文件-》进行自洽计算 -》进行tDOS&amp;pDOS计算-》数据提取绘图</p><p>由于电子占据的计算方法不用，态密度的计算也分为两种高斯展宽和四面体两种方法。</p><p><strong>注：关注高斯展宽和四面体两种方法会对结果产生什么影响？关注nbnd的设置数值会对结果产生什么影响？此次计算与真实带隙的区别？</strong></p><h3 id="2、结构">2、结构</h3><p>通过<a href="https://next-gen.materialsproject.org/">The Materials Project</a>下载需要的Si结构模型，登入(邮箱登录)后点击Start Exploring Materials，在Materials搜索框中搜索想要的晶体的结构化学式。在搜索结果中一般选择Energy Above Hull为0的结构，点击进入结构后在结构可视化窗口的右上角最后一个图标中可以进行下载，结构文件格式有CIF、POSCAR等，这里选择下载POSCAR以便于后续的QE计算。</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs fortran">Si8<br><span class="hljs-number">1.0</span><br>   <span class="hljs-number">5.4437023729394527</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000003</span><br>  -<span class="hljs-number">0.0000000000000003</span>    <span class="hljs-number">5.4437023729394527</span>    <span class="hljs-number">0.0000000000000003</span><br>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">5.4437023729394527</span><br>Si<br><span class="hljs-number">8</span><br><span class="hljs-keyword">direct</span><br>   <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.2500000000000000</span> Si0+<br>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.5000000000000000</span> Si0+<br>   <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.7500000000000000</span> Si0+<br>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span> Si0+<br>   <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.7500000000000000</span> Si0+<br>   <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.0000000000000000</span> Si0+<br>   <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.2500000000000000</span> Si0+<br>   <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.5000000000000000</span> Si0+<br></code></pre></td></tr></table></figure><p>第3-5行为晶胞参数，第6行为原子种类，第7行为原子个数，第8行为原子坐标类型，分别有笛卡尔坐标和分数坐标，这里为分数坐标。第9行到末尾为各个原子在晶胞中的位置。在QE的输入文件中需要第3-5行和第9行到末尾的作为结构数据，分别为QE的输入文件中的CELL_PARAMETERS和ATOMIC_POSITIONS，注意在实际输入QE输入文件时候要将原子位置信息(即第9行后)每一行标注原子种类：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs powershell">CELL_PARAMETERS (angstrom)<br>   <span class="hljs-number">5.4437023729394527</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000003</span><br>  <span class="hljs-literal">-0</span>.<span class="hljs-number">0000000000000003</span>    <span class="hljs-number">5.4437023729394527</span>    <span class="hljs-number">0.0000000000000003</span><br>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">5.4437023729394527</span><br>ATOMIC_POSITIONS (crystal) <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.2500000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.5000000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.7500000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.0000000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.7500000000000000</span>    <span class="hljs-number">0.7500000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.0000000000000000</span> <br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.2500000000000000</span>    <span class="hljs-number">0.2500000000000000</span><br><span class="hljs-built_in">Si</span>   <span class="hljs-number">0.5000000000000000</span>    <span class="hljs-number">0.0000000000000000</span>    <span class="hljs-number">0.5000000000000000</span><br></code></pre></td></tr></table></figure><p><strong>注意：在CELL_PARAMETERS和ATOMIC_POSITIONS后面分别书写了(angstrom)和(crystal)，这起到了对于输入结构信息的单位进行标记的作用，angstrom代表单位为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>A</mi><mo>˚</mo></mover></mrow><annotation encoding="application/x-tex">\AA</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9468em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9468em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2361em;"><span class="mord">˚</span></span></span></span></span></span></span></span></span></span>，这与POSCAR文件晶格参数单位一致，crystal官网解释为“atomic positions are in crystal coordinates, i.e”这里可以理解为用分数坐标定义原子位置。为方便起见建议初学结构单位要与POSCAR一致，这涉及到输入文件中&amp;SYSTEM的某些参数。</strong></p><h3 id="3、赝势">3、赝势</h3><p>在解决原子坐标问题后，选择赝势文件，**严格来说，赝势的选择需要进行测试，使用的赝势要尽可能的使得优化出来的结构晶格参数符合真实情况。**这里以Si为例简单的介绍一下在QE输入文件中赝势如何表示：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ATOMIC_SPECIES<br>Si <span class="hljs-number">28.09</span> Si<span class="hljs-selector-class">.SG15</span><span class="hljs-selector-class">.PBE</span><span class="hljs-selector-class">.UPF</span> ！原子种类 相对质量 赝势文件名称<br></code></pre></td></tr></table></figure><p>原子种类：有几种就有几行，要正确标出。</p><p>相对质量：在DFT计算中不读取，在分子动力学计算中需要。</p><p>赝势文件名称：<strong>必须</strong>要与赝势文件名称一一对应。</p><h3 id="4、k点">4、k点</h3><p>K点的选择同样与赝势一样需要进行测试，一般而言k点越大计算越精确，但同样的k点越大计算成本越高，最理想的情况是达到精度与计算成本的平衡。同样以Si为例简单的介绍一下在QE输入文件中K点如何表示：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">K_POINTS</span> (automatic)<br><span class="hljs-attribute">8</span> <span class="hljs-number">8</span> <span class="hljs-number">8</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>一般k点取值比例遵循晶胞轴越长，k点越小。<strong>注意：其后也有标签描述k点，一般用automatic。</strong></p><h3 id="5、结构优化：">5、结构优化：</h3><p>对于一个结构，要找到基态下最稳定的结构，通过结构优化来进行，在结构优化中对于三维材料而言上述结构文件提到的晶胞的大小(POSCAR第3-5行)，原子坐标位置(POSCAR第9行后)都要进行优化。在找到基态下稳定结构后才可以进行后续的自洽计算，DOS计算，能带计算等。以下为结构优化的参数文件：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&amp;CONTROL<br>calculation = <span class="hljs-string">&#x27;vc-relax&#x27;</span> !说明计算的内容是什么<br>restart_mode = <span class="hljs-string">&#x27;from_scratch&#x27;</span> !分为from_scrtch与restart前者（默认）为从头开始，后者用于续算。 <br>pseudo_dir = <span class="hljs-string">&#x27;.&#x27;</span> !赝势存在的路径，此处表示为本文件夹下。<br>etot_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span> !能量收敛标准，默认为<span class="hljs-number">1</span>D-<span class="hljs-number">4</span>a.u， <span class="hljs-number">1</span>au=<span class="hljs-number">27.2114</span>ev，即此处为<span class="hljs-number">2.7</span>D-<span class="hljs-number">5</span>ev<br>forc_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">3</span> !力收敛标准，单位同上，约为<span class="hljs-number">0.02</span>ev<br>nstep = <span class="hljs-number">200</span> !结构优化最大步数，在relax中默认为<span class="hljs-number">50</span>，但建议扩大。<br>/<br>&amp;SYSTEM<br>ibrav = <span class="hljs-number">0</span> ! 此处便是与结构有关的变量，比较杂乱，推荐设为<span class="hljs-number">0</span>，配合CELL_PARAMETERS使用。<br>nat = <span class="hljs-number">8</span>  ! 原子数量<br>ntyp = <span class="hljs-number">1</span> !原子类型个数<br>ecutwfc = <span class="hljs-number">50.0</span> !截断能，需测试，越大越精准，但计算量越大单位为Ry,<span class="hljs-number">1</span> Ry = <span class="hljs-number">13.6</span>eV<br>ecutrho = <span class="hljs-number">250.0</span> ! 默认为ecutwfc的四倍。需测试。<br>occupations = <span class="hljs-string">&#x27;smearing&#x27;</span> !考虑拖尾效应，电子占据计算方法，可以平滑能量与态密度，离散狄拉克能级——&gt;连续分布的高斯函数。<br>smearing = <span class="hljs-string">&#x27;gauss&#x27;</span> !默认为gauss，<br>degauss = <span class="hljs-number">0.01</span> !高斯展宽值，单位为Ry。<br>/<br><br>&amp;ELECTRONS<br>conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span> !自洽收敛于阈值<br>electron_maxstep = <span class="hljs-number">150</span> !最大电子步数，默认为<span class="hljs-number">100</span><br>diagonalization = <span class="hljs-string">&#x27;david&#x27;</span> !对角化方法，默认为david<br>mixing_mode = <span class="hljs-string">&#x27;plain&#x27;</span> ! Broyden电荷密度混合方法，用于稳定迭代加速收敛。默认为<br>mixing_beta = <span class="hljs-number">0.7</span> !混合参数<br>/<br><br>&amp;IONS<br>ion_dynamics = <span class="hljs-string">&#x27;bfgs&#x27;</span> ! 原子位置结构优化方法<br>/<br>&amp;CELL<br>cell_dynamics = <span class="hljs-string">&#x27;bfgs&#x27;</span> ! 晶胞结构优化方法<br>/<br></code></pre></td></tr></table></figure><p>将结构、赝势、k点拼接到上述参数文件中，汇成一个文件，可随意命名(此处命名为in_qe)便为QE的输入文件。<strong>注意：赝势存放位置要与文件中标记的一样。</strong></p><h3 id="6、PBS提交">6、PBS提交</h3><p>以下保存为run.pbs:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment">#PBS -N AA #任务名称</span><br><span class="hljs-comment">#PBS -l nodes=1:ppn=32   #节点 核数</span><br><span class="hljs-comment">#PBS -l walltime=05:30:00  #最大可运行时间</span><br><span class="hljs-comment">#PBS -S /bin/bash </span><br><span class="hljs-comment">#PBS -j oe </span><br><span class="hljs-comment">#PBS -q zf_normal #节点名称</span><br><span class="hljs-built_in">cd</span> <span class="hljs-variable">$PBS_O_WORKDIR</span> <span class="hljs-comment">#进入提交任务所在工作目录</span><br><br><br>module load compiler/intel/2021.3.0 <span class="hljs-comment"># module load激活所需模块</span><br>module load mpi/intelmpi/2021.3.0<br><br><br>mpirun -np 32 /hpc/data/home/spst/zhengfan/qe-7.3.1/bin/pw.x &lt; in_relax &gt; out_relax <span class="hljs-comment"># 并行32核心运行pw.x程序</span><br></code></pre></td></tr></table></figure><p>提交任务：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">qsub <span class="hljs-built_in">run</span>.pbs<br></code></pre></td></tr></table></figure><p>计算结束后在out_relax文件中末尾显示JOB DONE。</p><h3 id="7、输出结果">7、输出结果</h3><p>将计算产生的优化的CELL以及ATOMIC_POSITIONS提取：</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ceylon">grep -A<span class="hljs-number">4</span> <span class="hljs-string">&#x27;CELL&#x27;</span> <span class="hljs-keyword">out</span><span class="hljs-number">_</span>relax &gt;&gt; CELL.dat<br>grep -A<span class="hljs-number">9</span> <span class="hljs-string">&#x27;ATOMIC&#x27;</span> <span class="hljs-keyword">out</span><span class="hljs-number">_</span>relax &gt;&gt; POS.dat<br></code></pre></td></tr></table></figure><p>-A4代表找到CELL连续输出四行，&gt;&gt;  CELL.dat为新建并存储输出的数据到名为CELL.dat的文件中。</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dns">CELL_PARAMETERS (angstrom)<br>   <span class="hljs-number">5</span>.<span class="hljs-number">457670074</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5</span>.<span class="hljs-number">457670074</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5</span>.<span class="hljs-number">457670074</span><br><br>--<br>CELL_PARAMETERS (angstrom)<br>   <span class="hljs-number">5</span>.<span class="hljs-number">473034545</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5</span>.<span class="hljs-number">473034545</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5</span>.<span class="hljs-number">473034545</span><br><br>--<br>CELL_PARAMETERS (angstrom)<br>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span><br><br>--<br>CELL_PARAMETERS (angstrom)<br>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span><br></code></pre></td></tr></table></figure><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dns">略...<br>--<br>ATOMIC_POSITIONS (crystal)<br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si              -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>       -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>End final coordinates<br></code></pre></td></tr></table></figure><p>将最后一次优化的数据替换QE输入文件的原子坐标与晶胞参数，作为自洽计算的开始。</p><p>此外：</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ceylon">grep <span class="hljs-string">&#x27;iter&#x27;</span> <span class="hljs-keyword">out</span><span class="hljs-number">_</span>relax<br></code></pre></td></tr></table></figure><p>可查看迭代收敛过程。</p><h3 id="8、自洽计算">8、自洽计算</h3><p>将结构优化文件夹复制为自洽计算文件夹：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">cp</span> -r relax scf<br></code></pre></td></tr></table></figure><p>并将QE输入文件进行更改<strong>注意此处：并没有在&amp;SYSTEM中添加nbnd参数</strong>：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs dns">&amp;CONTROL<br>calculation = &#x27;scf&#x27; !修改成 scf<br>restart_mode = &#x27;from_scratch&#x27;<br>pseudo_dir = &#x27;.&#x27;<br>prefix = &#x27;pwscf&#x27; !波函数保存文件夹名称<br>etot_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span><br>forc_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">3</span><br>nstep = <span class="hljs-number">200</span><br>/<br>&amp;SYSTEM<br>ibrav = <span class="hljs-number">0</span><br>nat = <span class="hljs-number">8</span><br>ntyp = <span class="hljs-number">1</span><br>ecutwfc = <span class="hljs-number">50</span>.<span class="hljs-number">0</span><br>ecutrho = <span class="hljs-number">250</span>.<span class="hljs-number">0</span><br>occupations = &#x27;smearing&#x27;<br>smearing = &#x27;gauss&#x27;<br>degauss = <span class="hljs-number">0</span>.<span class="hljs-number">01</span><br>/<br><br>&amp;ELECTRONS<br>startingwfc = &#x27;file&#x27; !新加参数，读取波函数加快收敛，普通体系加不加无所谓。但是注意同时也会固定自洽计算的时候的能带数<br>startingpot = &#x27;file&#x27; !新加参数<br>conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span><br>electron_maxstep = <span class="hljs-number">150</span><br>diagonalization = &#x27;david&#x27;<br>mixing_mode = &#x27;plain&#x27;<br>mixing_beta = <span class="hljs-number">0</span>.<span class="hljs-number">7</span><br>/<br><br>&amp;IONS<br>!ion_dynamics = &#x27;bfgs&#x27; !自洽计算不进行优化，注释掉<br>/<br>&amp;CELL<br>!cell_dynamics = &#x27;bfgs&#x27; !自洽计算不进行优化，注释掉<br>/<br>ATOMIC_SPECIES<br>Si <span class="hljs-number">28</span>.<span class="hljs-number">09</span> Si.SG15.PBE.UPF<br><br>CELL_PARAMETERS angstrom <br>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span><br>ATOMIC_POSITIONS crystal<br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si              -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>       -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>K_POINTS automatic<br><span class="hljs-number">8 8 8 0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>重命名为in.scf，修改提交脚本：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>pw.x &lt; <span class="hljs-keyword">in</span>.scf &gt; out.scf<br></code></pre></td></tr></table></figure><p>进行提交计算。</p><p>在out.scf文件中，可以看到体系共有32个价电子，只考虑了20条能带，这必然会在计算中造成有些能量的丢失，这种差别将在末尾进行探讨：</p><img src="D:\blog\source\file\dos_scf.png" alt="dos_scf" style="zoom:60%;" /><h3 id="9、非自洽计算">9、非自洽计算</h3><p>将自洽计算文件夹复制为总态密度计算文件夹，进行非自洽计算，<strong>注意：进行非自洽计算的目的在于读取上一步产生的电荷密度在更密的k点上求解方程得到本征值，其实对于非常小的体系非自洽计算可以省略直接进行DOS计算。</strong></p><p><strong>此外注意杂化泛函计算DOS整个流程都要进行自洽计算。</strong></p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">cp</span> -r scf dos<br></code></pre></td></tr></table></figure><p>只需修改参数：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">calculation</span> = <span class="hljs-string">&#x27;nscf&#x27;</span><br></code></pre></td></tr></table></figure><p>以及增加k点数量。</p><h3 id="10、DOS计算">10、DOS计算</h3><p>总态密度的计算需要计算的时候将运行文件换成<strong>dos.x</strong>，分态密度运行文件为<strong>projwfc.x</strong>。<a href="https://www.quantum-espresso.org/Doc/INPUT_DOS.html#idm16">QE手册</a>在DOS计算中给出两种常用布里渊区求和方法，分别为<strong>smearing</strong>和<strong>tetrahedra</strong>。</p><p>进行DOS计算需要另写一个控制文件，命名为in.dos(随意)：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">&amp;DOS<br>prefix = &#x27;pwscf&#x27;<br>bz_sum = &#x27;smearing&#x27; <span class="hljs-comment">#高斯拖尾</span><br>ngauss = 0<br>degauss = 0.01<br>DeltaE = 0.01 <br>fildos = dos.data !注意不是file<br></code></pre></td></tr></table></figure><p>PBS提交修改为</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>dos.x &lt; <span class="hljs-keyword">in</span>.dos &gt; out.dos<br></code></pre></td></tr></table></figure><p>计算后的总态密度在<code>dos.data</code>这个文件中，第一行为能量值，第二行为总态密度值，第三行为总态密度积分。</p><p>如若要换位四面体方法计算DOS参数修改为：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile">&amp;DOS<br>prefix = &#x27;pwscf&#x27;<br>bz_sum = &#x27;tetrahedra&#x27; <br>DeltaE = 0.01 <br>fildos = dos.data <br></code></pre></td></tr></table></figure><p>分别对经过非自洽计算和不经过非自洽计算的tDOS以及采用四面体方法的DOS用Origin进行作图(能量范围要减去费米能级)对比：</p><img src="D:\blog\source\file\SiDos.png" alt="SiDos" style="zoom:25%;" /><p>由图上可知，在计算流程上，scf后进行高密度K点nscf计算后的曲线相较scf直接计算的曲线稍微平滑。在方法上，相较高斯拖尾，四面体算法在费米能级附近不在有冗余的数据，可能更能真实的表达带隙的情况。但是四面体方法的数据不够平滑，图上有大量的毛刺突起。硅的带隙的实验值为1.12eV，计算得出的仅为0.5eV左右，这明显低估了硅的带隙。若想真实的算出接近于实验值的带隙，考虑需要杂化泛函的修正以及赝势和参数的测试。</p><h3 id="11、PDOS">11、PDOS</h3><p>分态密度则需要将运行的程序改为<strong>projwfc.x</strong>，同样需要另写一个控制文件，命名为in.pdos(随意)：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&amp;PROJWFC<br>prefix = <span class="hljs-string">&#x27;pwscf&#x27;</span><br>ngauss = <span class="hljs-number">0</span> !普通高斯放法<br>degauss = <span class="hljs-number">0.01</span> !展宽的值<br>DeltaE = <span class="hljs-number">0.01</span> !取点能量间隔，单位ev<br>filproj = <span class="hljs-string">&#x27;proj.data&#x27;</span> !<br>filpdos = <span class="hljs-string">&#x27;pdos.data&#x27;</span> !pods存放位置<br></code></pre></td></tr></table></figure><p>上述只是简短的进行了一些基本的参数书写，其余参数为默认值。</p><p>同样修改提交脚本：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>pw.x &lt; <span class="hljs-keyword">in</span>.pdos &gt; out.pdos<br></code></pre></td></tr></table></figure><p>进行提交计算，计算完毕后将会出现每个原子各自轨道的分态密度，如下图所示：</p><img src="D:\blog\source\file\PDOS.png" alt="PDOS" style="zoom: 67%;" /><p>接下来选择#1原子的#1(s)和#2(p)用Origin进行作图(能量范围要减去费米能级)：</p><img src="D:\blog\source\file\SipDos.png" alt="SipDos" style="zoom:25%;" /><p>对结果进行分析，发现Si的p轨道相对贡献较大，进一步对#2(p)文件中的p_x、p_y、p_z进行分析，发现其能量是简并的具有相同的贡献。</p><h3 id="12、nbnd参数">12、nbnd参数</h3><p>上述所有流程都是基于默认nbnd值进行计算，查看自洽计算的输出文件总价电子数量为32，默认只考虑20条能带，此时若将能带增加到32条、64条，tDOS会有什么变化？<strong>注意：在计算过程中不要增加<code>startingwfc</code>和<code>startingpot</code>参数</strong>，可能会因能带设置不一致而计算失败，如若增加则需要计算流程中nbnd设置一致。</p><p>结果用Origin作图：</p><img src="D:\blog\source\file\comDos.png" alt="comDos" style="zoom:25%;" /><p>分析结果可知，导带范围内计算的数据量随着能带越多而越多，对费米能级处以及价带影响不大。这建议在计算过程中设置比较合适的nbnd参数对DOS全局分析是必要的。</p><p>能带计算：</p><h3 id="1、计算流程-2">1、计算流程</h3><p>结构优化获取弛豫后的结构，将优化后的结构作为自洽计算的结构，自洽计算产生波函数便于以后计算能带或态密度读取。</p><p>计算过程：结构优化-》自洽计算-》能带计算-》提取数据-》绘图，有两种计算方法：</p><p>1、自洽计算 -》 非自洽计算(tetrahedra加大k点) -》能带计算-》提取数据 --》绘图</p><p>2、自洽计算 (smearing)-》直接计算能带 -》提取数据-》绘图</p><p><strong>注：关注occupation的设置对计算产生的影响？结构对计算产生的影响？高对称点的设置方法？&amp;SYSTEM中nbnd的取值对于结果的影响？</strong></p><h3 id="2、自洽计算-nbnd参数">2、自洽计算&amp;nbnd参数</h3><p>自洽计算中<code>occupation='smearing'</code>与<code>occupation='tetrahedra'</code>若使用smearing则需要设置smearing和degauss两个额外的参数，tetrahedra则不需要其他设置。<a href="https://www.quantum-espresso.org/Doc/INPUT_PW.html#idm362">QE手册</a>提到四面体方法适合于计算DOS，在DOS计算中进行进行的测试，高斯拖尾冗余的数据会对精细的能带间隙的定量分析产生一定影响。</p><p>对于计算中是否添加occupation参数进行测试，发现添加此参数会在自洽计算的输出文件中给到费米能级，不加occupation的参数输出文件中不会给出费米能级，则会给出最高占据与最低占据能量。费米能级对于分析能带是必要的。</p><p>另外，nbnd在<a href="https://www.quantum-espresso.org/Doc/INPUT_PW.html#idm362">QE手册</a>会默认为体系价电子总数的一半，这会丢失占据信息，所以一般在计算中需要设置为总价电子数以上的数值。</p><p><strong>在对Si的DOS计算中已经进行了一次自洽计算(见DOS计算8、)，此处将其自洽计算的结果拿来进行上述提到的第二种计算方法，同时：注意Si的结构并非原胞。</strong></p><h3 id="3、非自洽计算-能带计算-高对称点选择">3、非自洽计算&amp;能带计算&amp;高对称点选择</h3><p>如若选择第一种计算方法则在后续在进行一次非自洽计算即可，修改参数：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">calculation</span> = <span class="hljs-string">&#x27;nscf&#x27;</span><br>occupations = <span class="hljs-string">&#x27;tetrahedra&#x27;</span><br>增加K点<br></code></pre></td></tr></table></figure><p>能带计算：</p><p>在能带计算中需要在输入文件中将K点改为结构的高对称点，涉及到高对称点可以在<a href="https://seekpath.materialscloud.io/">seekpath在线网站</a>或<a href="http://www.xcrysden.org/">XcrySDen软件</a>将结构导入进行选择，能带计算输入文件：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs dns">&amp;CONTROL<br>calculation = &#x27;bands&#x27;<br>restart_mode = &#x27;from_scratch&#x27;<br>pseudo_dir = &#x27;.&#x27;<br>prefix = &#x27;pwscf&#x27;<br>etot_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span><br>forc_conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">3</span><br>nstep = <span class="hljs-number">200</span><br>/<br>&amp;SYSTEM<br>ibrav = <span class="hljs-number">0</span><br>nat = <span class="hljs-number">8</span><br>ntyp = <span class="hljs-number">1</span><br>ecutwfc = <span class="hljs-number">50</span>.<span class="hljs-number">0</span><br>ecutrho = <span class="hljs-number">250</span>.<span class="hljs-number">0</span><br>nbnd = <span class="hljs-number">64</span><br>occupations = &#x27;smearing&#x27;<br>smearing = &#x27;gauss&#x27;<br>degauss = <span class="hljs-number">0</span>.<span class="hljs-number">01</span><br>/<br><br>&amp;ELECTRONS<br>!startingwfc = &#x27;file&#x27;<br>!startingpot = &#x27;file&#x27;<br>conv_thr = <span class="hljs-number">1</span>D-<span class="hljs-number">6</span><br>electron_maxstep = <span class="hljs-number">150</span><br>diagonalization = &#x27;david&#x27;<br>mixing_mode = &#x27;plain&#x27;<br>mixing_beta = <span class="hljs-number">0</span>.<span class="hljs-number">7</span><br>/<br><br>ATOMIC_SPECIES<br>Si <span class="hljs-number">28</span>.<span class="hljs-number">09</span> Si.SG15.PBE.UPF<br><br>CELL_PARAMETERS angstrom <br>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>  -<span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">5.473864188</span><br>ATOMIC_POSITIONS crystal<br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si              -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span>        <span class="hljs-number">0</span>.<span class="hljs-number">7499982423</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>       -<span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span>        <span class="hljs-number">0</span>.<span class="hljs-number">2500017577</span><br>Si               <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">0000000000</span>        <span class="hljs-number">0</span>.<span class="hljs-number">5000000000</span><br>K_POINTS &#123;crystal_b&#125;         <br><span class="hljs-number">6</span>                             <br><span class="hljs-number">0.0 0.0</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">20</span>               <br><span class="hljs-number">0.0 0.5</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">10</span>               <br><span class="hljs-number">0.25 0.5</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">1</span>            <br><span class="hljs-number">0.375 0</span>.<span class="hljs-number">375 0.75</span> <span class="hljs-number">20</span>          <br><span class="hljs-number">0.0 0.0</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">20</span>               <br><span class="hljs-number">0.5 0.5</span> <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">15</span>               <br><span class="hljs-number">0.5 0.25</span> <span class="hljs-number">0</span>.<span class="hljs-number">75</span> <span class="hljs-number">15</span>            <br><span class="hljs-number">0.0 0.5</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">1</span>            <br></code></pre></td></tr></table></figure><p>提交进行修改：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>pw.x &lt; <span class="hljs-keyword">in</span>.bands &gt; out.bands<br></code></pre></td></tr></table></figure><h3 id="4、能带数据提取-绘图">4、能带数据提取&amp;绘图</h3><p>能带数据提取需要用到QE的band.x脚本，以及新的输入文件：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&amp;BANDS<br>prefix= <span class="hljs-string">&#x27;pwscf&#x27;</span> <br>outdir= <span class="hljs-string">&#x27;.&#x27;</span><br><span class="hljs-attribute">filband</span>=band.dat<br>/<br></code></pre></td></tr></table></figure><p>上述参数主要是指定了数据的存储以及能带绘制数据的存放位置。</p><p>提交进行修改：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>bands.x &lt; <span class="hljs-keyword">in</span>.bandsdat &gt; out_bandsdat<br></code></pre></td></tr></table></figure><p>绘图运行plotband.x，需要将上一步提取的能带数据标定图像y轴能量范围，而且需要设置费米能级的值用于给出合适的图片结果，费米能级需要在前置的设置过occupation参数的计算结果中提取到：</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">grep</span> <span class="hljs-variable">Fermi</span> <span class="hljs-function"><span class="hljs-title">xxx</span>(<span class="hljs-variable">xxx</span>为输出文件的名称)</span><br></code></pre></td></tr></table></figure><p>运行plotband.x需要的新的控制文件：</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ldif">band.dat <span class="hljs-comment">#能带数据存放的文件名称</span><br><span class="hljs-literal">-</span>2.0 12.0  <span class="hljs-comment">#注意此处坐标为绝对坐标，实际最终图像的y轴范围要减去费米能级</span><br>silicon_bands.xmgr          <br>silicon_bands.ps               <br>6.2578<br>1.0 6.2578<br></code></pre></td></tr></table></figure><p>修改提交：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mpirun -np <span class="hljs-number">32</span> <span class="hljs-regexp">/hpc/</span>data<span class="hljs-regexp">/home/</span>spst<span class="hljs-regexp">/zhengfan/</span>qe-<span class="hljs-number">7.3</span>.<span class="hljs-number">1</span><span class="hljs-regexp">/bin/</span>plotband.x &lt; plotbands.<span class="hljs-keyword">in</span> &gt; out.plotbands<br></code></pre></td></tr></table></figure><p><strong>注：在实际计算中节点绘图完成后一直处于run的状态，需要主动终止程序：qsub 提交ID，或许可以加载所需模块后进行直接运行</strong></p><p>用plotband.x绘图结果与实际上Si的能带图对比发现不一样，这是由于上述提到的此次能带计算使用的并不是原胞，会产生一定的能带折叠：</p><img src="D:\blog\source\file\silicon_bands.ps-16662_01.png" alt="silicon_bands.ps-16662_01" style="zoom: 15%;" /><h3 id="5、原胞硅的能带计算">5、原胞硅的能带计算</h3><p>将Si结构进行替换为两个原子的原胞：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">CELL_PARAMETERS</span> angstrom <br>   <span class="hljs-attribute">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">2</span>.<span class="hljs-number">736830861</span>   <span class="hljs-number">2</span>.<span class="hljs-number">736830861</span><br>   <span class="hljs-attribute">2</span>.<span class="hljs-number">736830861</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span>   <span class="hljs-number">2</span>.<span class="hljs-number">736830861</span><br>   <span class="hljs-attribute">2</span>.<span class="hljs-number">736830861</span>   <span class="hljs-number">2</span>.<span class="hljs-number">736830861</span>   <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span><br><span class="hljs-attribute">ATOMIC_POSITIONS</span> crystal<br><span class="hljs-attribute">Si</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>       <br><span class="hljs-attribute">Si</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span> <span class="hljs-number">0</span>.<span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><p>同样进行上述一样的计算流程以及参数设置，得出结果画图对比：</p><img src="D:\blog\source\file\bands.ps-73405_01.png" alt="bands.ps-73405_01" style="zoom:15%;" /><p>与8原子的Si的能带做对比，还是能看出超胞具有能带折叠的情况，但是如果和能带进行一一对应对比还会发现能带出现一定的能量偏移猜测这可能是由于参数计算并不真实一致或由于其他影响，虽然不再进行下一步原因的探讨，但<strong>提醒研究完美晶体的本征能带结构的时候首选原胞。</strong></p><p>改变高对称点和能量窗口重新画图：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">K_POINTS crystal_b<br><span class="hljs-number">5</span><br><span class="hljs-number">0.0 0.5</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">20</span><br><span class="hljs-number">0.0 0.0</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">30</span><br>-<span class="hljs-number">0.5 0.0</span> -<span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">10</span><br>-<span class="hljs-number">0.375 0</span>.<span class="hljs-number">25</span> -<span class="hljs-number">0.375 30</span><br><span class="hljs-number">0.0 0.0</span> <span class="hljs-number">0</span>.<span class="hljs-number">0</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">band.dat</span><br><span class="hljs-keyword"></span>-<span class="hljs-number">2</span> <span class="hljs-number">12</span>.<span class="hljs-number">0</span><br><span class="hljs-keyword">bands.xmgr</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bands.ps</span><br><span class="hljs-keyword"></span><span class="hljs-number">6</span>.<span class="hljs-number">2798</span> <br><span class="hljs-number">1</span>.<span class="hljs-number">0</span> <span class="hljs-number">6</span>.<span class="hljs-number">2798</span><br></code></pre></td></tr></table></figure><img src="D:\blog\source\file\bands.ps-88654_01.png" alt="bands.ps-88654_01" style="zoom: 15%;" /><h3 id="6、投影能带">6、投影能带</h3><p>能带投影的计算需要projwfc.x生成的投影能带数据x.projwfc_up，进而与band.x生成的能带数据结合可以进行投影能带的图像绘制。</p><p>需要新的输入文件：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp;projwfc</span><br>prefix = &#x27;pwscf&#x27;<br>outdir = &#x27;./outdir&#x27; <span class="hljs-meta">#波函数存放位置</span><br>filproj = &#x27;fatband&#x27;<br>/<br></code></pre></td></tr></table></figure><p>修改提交脚本，特别注意，在提交任务的时候如果所用核数较多会出现<code>nb less than the number of proc</code>的错误，这时候减少所用核数就可以。</p><p>绘图所需数据：projwfc_up、band.dat</p><p>绘图所需工具：python</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;[a-zA-Z]&#x27;</span> <span class="hljs-keyword">sno</span>.projwfc_up |<span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;Sn 5S&#x27;</span>|awk <span class="hljs-string">&#x27;&#123;printf( $1-1&quot;,&quot;)&#125;END&#123;print(&quot;&quot;);&#125;&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># plot range for y-axis</span><br>ymin=-<span class="hljs-number">13</span><br>ymax=<span class="hljs-number">9</span><br>dline=<span class="hljs-number">10</span> <span class="hljs-comment"># vertical line intervals</span><br>lw=<span class="hljs-number">0.5</span> <span class="hljs-comment"># line width</span><br>nband=<span class="hljs-number">8</span> <span class="hljs-comment"># highest valence band</span><br><br>feig=<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;band.dat&#x27;</span>)<br>l=feig.readline()<br>nbnd=<span class="hljs-built_in">int</span>(l.split(<span class="hljs-string">&#x27;,&#x27;</span>)[<span class="hljs-number">0</span>].split(<span class="hljs-string">&#x27;=&#x27;</span>)[<span class="hljs-number">1</span>])<br>nks=<span class="hljs-built_in">int</span>(l.split(<span class="hljs-string">&#x27;,&#x27;</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">&#x27;=&#x27;</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">&#x27;/&#x27;</span>)[<span class="hljs-number">0</span>])<br><span class="hljs-comment">#nks = 91</span><br><br>eig=np.zeros((nks,nbnd),dtype=<span class="hljs-built_in">float</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nks):<br>    l=feig.readline()<br>    count=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> nbnd%<span class="hljs-number">10</span>==<span class="hljs-number">0</span>:<br>        n=nbnd//<span class="hljs-number">10</span><br>    <span class="hljs-keyword">else</span>:<br>        n=nbnd//<span class="hljs-number">10</span>+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        l=feig.readline()<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(l.split())):<br>            eig[i][count]=l.split()[k]<br>            count=count+<span class="hljs-number">1</span><br><br>feig.close()<br><br><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl<br>mpl.use(<span class="hljs-string">&#x27;Agg&#x27;</span>)<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>F=plt.gcf()<br>F.set_size_inches([<span class="hljs-number">5</span>,<span class="hljs-number">5</span>])<br>p1=plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br><br><span class="hljs-comment">#eig_vbm=max(eig[:, nband-1])</span><br>eig_vbm= <span class="hljs-number">6.2798</span> <span class="hljs-comment"># fermi energy level in scf output for metals</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nbnd):<br>    line1=plt.plot(np.arange(<span class="hljs-number">0</span>,nks), eig[:,i]-eig_vbm,color=<span class="hljs-string">&#x27;grey&#x27;</span>,linewidth=lw )<br><br>plt.axhline(<span class="hljs-number">0</span>, linestyle=<span class="hljs-string">&#x27;:&#x27;</span>, linewidth=<span class="hljs-number">1</span>,color = <span class="hljs-string">&#x27;grey&#x27;</span>)<br>vline=dline<br><span class="hljs-keyword">while</span> vline&lt;nks-<span class="hljs-number">1</span>:<br>    plt.axvline(x=vline, ymin=ymin, ymax=ymax,linewidth=lw,color=<span class="hljs-string">&#x27;black&#x27;</span>)<br>    vline=vline+dline<br><br>elem=[<span class="hljs-string">&#x27;Si&#x27;</span>]<br>ielem=np.array([<span class="hljs-number">2</span>],dtype=np.int32) <span class="hljs-comment"># number of atoms for each element</span><br>orb=[[<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;p&#x27;</span>]] <span class="hljs-comment"># projectors for each element</span><br><br>N = <span class="hljs-built_in">len</span>(elem)<br>iorb=np.zeros([N,],dtype=np.int32)  <span class="hljs-comment"># number of projectors for each element</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    iorb[i]=<span class="hljs-built_in">len</span>(orb[i])<br><br>lorb=np.zeros([N,],dtype=np.int32) <span class="hljs-comment"># number of local orbital for each element</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> orb[i]:<br>        <span class="hljs-keyword">if</span> j <span class="hljs-keyword">is</span> <span class="hljs-string">&#x27;s&#x27;</span>:<br>            lorb[i]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> j <span class="hljs-keyword">is</span> <span class="hljs-string">&#x27;p&#x27;</span>:<br>            lorb[i]+=<span class="hljs-number">3</span><br>        <span class="hljs-keyword">elif</span> j <span class="hljs-keyword">is</span> <span class="hljs-string">&#x27;d&#x27;</span>:<br>            lorb[i]+=<span class="hljs-number">5</span><br>        <span class="hljs-keyword">elif</span> j <span class="hljs-keyword">is</span> <span class="hljs-string">&#x27;f&#x27;</span>:<br>            lorb[i]+=<span class="hljs-number">7</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;unexpect: &quot;</span>,j)<br>            <span class="hljs-keyword">assert</span> <span class="hljs-literal">False</span><br><br>nlorb=np.dot(ielem,lorb)<br><br>pjsum=np.zeros([nlorb, nks, nbnd], dtype=np.float32)<br><br>filproj=<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;fatband.projwfc_up&#x27;</span>)<br>nline_io_header=<span class="hljs-number">12</span> <span class="hljs-comment"># line number at &#x27;    F    F&#x27;</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nline_io_header):<br>    filproj.readline()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nlorb):<br>    filproj.readline()<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nks):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nbnd):<br>            pjsum[i,j,k]=<span class="hljs-built_in">float</span>(filproj.readline().split()[<span class="hljs-number">2</span>])<br><br>nplotline=np.<span class="hljs-built_in">sum</span>(iorb)<br><span class="hljs-comment"># oo, orbital index for each kind of color, oo can be generated by the following commands</span><br><span class="hljs-comment">#grep &#x27;[a-zA-Z]&#x27; sno.projwfc_up |grep 2P|awk &#x27;&#123;printf( $1-1&quot;,&quot;)&#125;&#x27;</span><br>oo=[[<span class="hljs-number">0</span>,<span class="hljs-number">4</span>],<br>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]]<br><br>s_of_o=np.zeros([nks,],dtype=np.float32)<br>color=[<span class="hljs-string">&#x27;r&#x27;</span>,<span class="hljs-string">&#x27;g&#x27;</span>]<span class="hljs-comment">#&#x27;orange&#x27;,&#x27;cyan&#x27;,&#x27;blue&#x27;</span><br>label=[<span class="hljs-string">&#x27;Si s&#x27;</span>,<span class="hljs-string">&#x27;Si p&#x27;</span>]<br><br>scale=<span class="hljs-number">88</span><br>st=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(oo)):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nbnd):<br>        s_of_o=np.zeros([nks,],dtype=np.float32)<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> oo[i]:<br>            s_of_o[:]+=pjsum[j,:,k]<br>        <span class="hljs-keyword">if</span> k == <span class="hljs-number">0</span>:<br>            st.append(plt.scatter(-<span class="hljs-number">1</span>, ymin-<span class="hljs-number">1</span>, <span class="hljs-number">20</span>, c=color[i], alpha=<span class="hljs-number">0.5</span>, label=label[i],marker=<span class="hljs-string">&#x27;.&#x27;</span>,edgecolor=<span class="hljs-string">&#x27;none&#x27;</span>))<br>        st.append(plt.scatter(np.arange(<span class="hljs-number">0</span>,nks), eig[:,k]-eig_vbm, s=scale*s_of_o, c=color[i], alpha=<span class="hljs-number">0.5</span>, marker=<span class="hljs-string">&#x27;.&#x27;</span>,edgecolor=<span class="hljs-string">&#x27;none&#x27;</span>))<br><br>plt.xlim([<span class="hljs-number">0</span>,nks-<span class="hljs-number">1</span>]) <span class="hljs-comment"># 201 points</span><br>plt.ylim([ymin,ymax])<br>plt.ylabel(<span class="hljs-string">r&#x27;E (eV)&#x27;</span>,fontsize=<span class="hljs-number">16</span>)<br>plt.xticks((<span class="hljs-number">0</span>,<span class="hljs-number">20</span>,<span class="hljs-number">50</span>,<span class="hljs-number">60</span>,<span class="hljs-number">90</span>) ,( <span class="hljs-string">&#x27;L&#x27;</span>,<span class="hljs-string">r&#x27;$&#123;\Gamma&#125;$&#x27;</span>, <span class="hljs-string">&#x27;X&#x27;</span>,<span class="hljs-string">&#x27;U&#x27;</span>,<span class="hljs-string">r&#x27;$&#123;\Gamma&#125;$&#x27;</span>) )<br><br>plt.subplots_adjust(left=<span class="hljs-number">0.25</span>, right=<span class="hljs-number">0.75</span>, top=<span class="hljs-number">0.95</span>, bottom=<span class="hljs-number">0.1</span>)<br>p1.legend(scatterpoints =<span class="hljs-number">1</span>, numpoints=<span class="hljs-number">1</span>,markerscale=<span class="hljs-number">2.0</span>, bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">&#x27;upper left&#x27;</span>, borderaxespad=<span class="hljs-number">0.</span>)<br><br>plt.savefig(<span class="hljs-string">&#x27;pjband.png&#x27;</span>,dpi=<span class="hljs-number">400</span>)<br><br></code></pre></td></tr></table></figure><p><strong>注意：ymin、ymax、nband、eig_vbm、elem、ielem、orb、nline_io_header、oo、color、label、plt.xticks以及两个输入文件的名称的设置。</strong></p><p>加载模块进行运行脚本：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">module</span> load apps/python/<span class="hljs-number">3</span>.<span class="hljs-number">7</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">python</span> plotpband.py<br></code></pre></td></tr></table></figure><p>生成的projband.png即为能带投影图：</p><img src="D:\blog\source\file\projband.png" alt="projband" style="zoom:35%;" /><p>分析能带图像发现费米能级位于带隙中且带隙较小，价带顶(VBM)位于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Γ</span></span></span></span>点，导带底(CBM)位于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Γ</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>之间且接近<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>，在费米能级附近Si的p轨道贡献大，这与DOS结果相符。但是同样的对能隙值进行提取发现仅为0.626eV（6.594-5.971），这相较于实际的1.12eV相差还是比较大，或许更精准的赝势、泛函(如HSE)、参数设置可以使其定量结果接近实验值。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>QE学习</title>
    <link href="/2025/09/26/QE%E5%AD%A6%E4%B9%A0/"/>
    <url>/2025/09/26/QE%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1>1、QE准备</h1><p>计算模型</p><p>赝势</p><p>输入文件与参数</p><p>&amp;CONTROL</p><p>calculation = ‘vc-relax’</p><p>pseudo dir = ‘.’</p><p>&amp;SYSTEM</p><p>ibrav = 2 #对称性</p><p>A = 3.567 #晶格常数</p><p>nat = 2 #原子个数</p><p>ntyp = 1 #原子</p><p>ecutwfc = 40. 0 #平面波截断能</p><p>&amp;ELECTRONS  # 电子自洽循环</p><p>electron maxstep = 100 #最大步数</p><p>conv thr = 1D-8</p><p>diagonalization = ‘david’ #算法</p><p>mixing mode = ‘plain’  #电荷密度的混合参数</p><p>mixing beta = 0.7</p><p>&amp;IONS #离子迭代 方法</p><p>ion dynamics =‘bfgs’</p><p>&amp;CELL #晶胞优化 方法</p><p>cell dynamics = ‘bfgs’</p><p>cell dofree = ‘all’</p><p>ATOMIC SPECIES #</p><p>C 12.011 名称</p><p>ATOMIC POSITIONS crystal #原子坐标</p><h1>2 结构优化 自洽计算</h1><p>vc-relax</p><p>etot_conv_thr</p><p>forc_conv_thr</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>注意力机制学习</title>
    <link href="/2025/09/12/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0/"/>
    <url>/2025/09/12/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br>text = <span class="hljs-string">&quot;歪比巴卜。XXXXX&quot;</span><br><br><span class="hljs-keyword">import</span> spacy<br><br>nlp = spacy.load(<span class="hljs-string">&#x27;zh_core_web_sm&#x27;</span>)<br>doc = nlp(text)<br><br>emd_dim = <span class="hljs-number">10</span> <span class="hljs-comment">#特征种类</span><br><br>dics = &#123;&#125;<br><span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> doc: <span class="hljs-comment"># ?应该是被分成单词的个数 </span><br>    dics[token.text] = token.vector[:emd_dim] <span class="hljs-comment">#将dics数组中放置数据</span><br><br>X = pd.DataFram(dics) <span class="hljs-comment">#数表</span><br><br><span class="hljs-comment">#X.T为转置</span><br><br><span class="hljs-comment">#需要X.T与Wq、Wk点乘，通常np.dot(X.T,Wq)或X.T @ Wq 后者较为直观</span><br><br>d_k= <span class="hljs-number">6</span> <br>Wq = np.random.randn(emd_dim, d_k) <span class="hljs-comment">#随机数</span><br>Wk = np.random.randn(emd_dim, d_k)<br>Wv = np.random.randn(emd_dim, d_k)<br><br>Q = X.T @ Wq<br>K = X.T @ Wk<br>V = X.T @ Wv<br><br><br><span class="hljs-comment"># Q @ K.T  </span><br><span class="hljs-comment">#点积缩放，防止单个数据过大</span><br>df_QK = Q @ K.T/np.sqrt(d_k)<br><br><span class="hljs-comment">#softMax</span><br><br><span class="hljs-comment"># df_QK.iloc[0] 表中第一列数据</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(df_QK)): <span class="hljs-comment">#df_Qk的列的个数</span><br>    exp_v = np.exp(df_QK.iloc[i])<span class="hljs-comment"># e^x 适用？</span><br>    softmax =exp_v /np.<span class="hljs-built_in">sum</span>(exp_v) <span class="hljs-comment">#归一化？</span><br>    df_QK.iloc[i] = softmax <span class="hljs-comment"># 赋值 </span><br><br> <span class="hljs-comment">#### V</span><br>attention = df_QK @V<br><br></code></pre></td></tr></table></figure><p>2017 Attention is All You Need</p><p>Positional Encoding 位置编码</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Vasp学习记录</title>
    <link href="/2025/09/07/Vasp%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/09/07/Vasp%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="https://goodog0.github.io/file/bigbrosic.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>deepseek本地部署</title>
    <link href="/2025/07/30/deepseek%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/"/>
    <url>/2025/07/30/deepseek%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h3 id="1、配置环境">1、配置环境</h3><p>系统：Linux或Windos系统</p><p>配置：96线程，192Gb内存。4线程，16Gb内存。</p><h3 id="2、网站">2、网站</h3><p><a href="ollama.com">ollama</a></p><h3 id="3、流程">3、流程</h3><p>下载适用于系统的<a href="https://ollama.com/download">ollama</a>安装包，并进行安装。在我下载的过程中因为文件过大下载缓慢，并且在Linux系统上出现过下载失败的错误，只要把/usr/local/lib/路径下的ollama的空文件夹删除掉，重新下载即可。在Linux系统上的下载命令为：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">curl -fsSL https://ollama.<span class="hljs-keyword">com</span>/install.<span class="hljs-keyword">sh</span> | <span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p>如<a href="https://ollama.com/download/linux">ollama download for linux</a>所示。在window系统上只需将下载好的安装包进行安装即可，只不过安装位置无法进行手动更改仅能安装到C盘。打开CMD(windos)或终端（Linux）输入：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama -v</span><br></code></pre></td></tr></table></figure><p>显示版本号即为安装成功，在安装过程中由于依赖关系还导致GPU并行程序CUDA没有安装，由于机器并没有强大的显卡作为支持，这里进行忽略，不知道会不会对使用产生影响。</p><p>接下来对大模型进行安装在<a href="https://ollama.com/search">ollama models</a>中选择DeepSeeek并根据硬件所能支持的程度安装相应版本的DeepSeek。</p><p>当出现：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Seed a message (/? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>)<br></code></pre></td></tr></table></figure><p>提示安装成功，可以输入文字进行使用。</p><p>输入命令：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama list</span><br></code></pre></td></tr></table></figure><p>可以查看ollama上面安装了哪些大模型。</p><p>输入命令：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ollama <span class="hljs-built_in">run</span> 大模型名称<br></code></pre></td></tr></table></figure><p>即可使用。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>PWmatInDocker</title>
    <link href="/2025/06/27/PWmatInDocker/"/>
    <url>/2025/06/27/PWmatInDocker/</url>
    
    <content type="html"><![CDATA[<h1>1、环境配置</h1><p><a href="https://www.pwmat.com/pwmat-trial-download">PWmat试用版(docker镜像)</a></p><p><a href="https://www.pwmat.com/pwmat-resource/Manual_cn.pdf">PWmat手册</a></p><h1>2、输入输出文件</h1><p>参数文件：etot.input，类似于INCAR</p><p>结构文件：atom.config，类似于POSCAR</p><p>赝势文件：*.UPF，类似于POTCAR</p><p>其他</p><p>以PWmat给出的为例</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment">#不区分大小写，无顺序</span><br>4 1 <span class="hljs-comment">#NODE1*NODE2必须等于在运行时候的并行数，波函数分组*K点分组</span><br>IN.ATOM = atom.config <span class="hljs-comment">#</span><br>IN.PSP1 = Si.NCPP.UPF <span class="hljs-comment">#声明第一个赝势，声明顺序不影响，只需包含结构文件中所有的元素即可。</span><br>JOB = SCF <span class="hljs-comment">#声明计算种类 </span><br></code></pre></td></tr></table></figure><p>SCF：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = SCF<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE #<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">36</span>控制交换关联泛函，一般默认为PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span> #<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">16</span>截断能<br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> #<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">24</span>类似于KPOINTS,Monkhorst-pack方法生成K点，后三个数目为k点偏移，最后一位数控制对称性，一般只在MD/TDDFT/NAMD/NEB或SPIN = <span class="hljs-number">222</span> 时操作<br></code></pre></td></tr></table></figure><p>NONSCF:</p><p>计算能带结构的时候</p><p>将SCF计算中的势函数OUT.VR复制为IN.VR。</p><p>2.4.1IN.KPT文件？？？？？？（类似于VASP中的<em><a href="http://KPATH.in">KPATH.in</a></em>，存放高对称点）</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span># nkpt<br><span class="hljs-symbol">2 </span><span class="hljs-number">1.0000</span> # iflag, a0<br><span class="hljs-number">0.250</span> <span class="hljs-number">0</span>,<span class="hljs-number">250</span> <span class="hljs-number">0.250</span> <span class="hljs-number">0.25</span> # ak1, ak2, ak3, weight<br><span class="hljs-number">0.250</span> <span class="hljs-number">0.250</span> <span class="hljs-number">0.750</span> <span class="hljs-number">0.75</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = NONSCF<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span><br><span class="hljs-attribute">IN</span>.KPT = T #<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">55</span> 默认关闭，打开时候从文件（注意）读取K点<br><span class="hljs-attribute">IN</span>.VR = T #<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">50</span> 默认关闭 打开后读取势函数，SPIN = <span class="hljs-number">2</span>自旋体系为两个势函数<br></code></pre></td></tr></table></figure><p>2.4.3中当 JOB = NONSCF 且设置 IN.NONSCF = T 时，将从 ‘IN.NONSCF’ 文件中读取 非自洽计算需要的其他可选参数</p><p>注意：(警告): 当使用杂化泛函进行非自洽计算时，还需要上一步 SCF 计算生成的波函 数 ‘OUT.HSEWR(i)’ 文件。</p><p>DOS：</p><p>DOS 计算必须输入<strong>波函数和本征能量</strong>，通常来自之前的 SCF 或 NONSCF 计算， 需要将 ‘OUT.WG’ 文件复制为 ‘IN.WG’ 文件，并在 etot.input 中设置 IN.WG = T。还 需要从之前的计算中复制 ‘OUT.EIGEN’ 文件</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = DOS<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span><br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> #与自洽或非自洽时保持一致<br><span class="hljs-attribute">IN</span>.WG = T<br></code></pre></td></tr></table></figure><p>K点插值法，见手册P6。</p><p>MOMENT：???</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = MOMENT<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span><br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> #与自洽或非自洽时保持一致<br><span class="hljs-attribute">IN</span>.WG = T<br></code></pre></td></tr></table></figure><p>RELAX:</p><p>类似于ISIF = 2</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = RELAX<br><span class="hljs-attribute">RELAX_DETAIL</span> = <span class="hljs-number">1</span> <span class="hljs-number">100</span> <span class="hljs-number">0</span>.<span class="hljs-number">01</span> #弛豫方法；最大离子步；受力标准；是否进行晶格优化；晶格收敛标准；沿搜索方向的能量收敛标准？？p15<br><span class="hljs-attribute">ACCURACY</span> = High<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span><br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>类似于ISIF = 3</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = RELAX<br><span class="hljs-attribute">RELAX_DETAIL</span> = <span class="hljs-number">1</span> <span class="hljs-number">100</span> <span class="hljs-number">0</span>.<span class="hljs-number">01</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span>.<span class="hljs-number">01</span><br><span class="hljs-attribute">ACCURACY</span> = High<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">70</span><br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">9</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>杂化泛函略</p><p>EGGFIT略</p><p>MD</p><p>与 MD 相关的关键词（部分）: MD_DETAILS, IN.MDOPT, IN.EXT_FORCE</p><p>注意！MD_DETAILS是没有默认值的。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">4</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">IN</span>.ATOM = atom.config<br><span class="hljs-attribute">JOB</span> = MD<br><span class="hljs-attribute">MD_DETAIL</span> = <span class="hljs-number">1</span> <span class="hljs-number">1000</span> <span class="hljs-number">1</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> #MD方法；计算总步数；步长（fs）；初始温度；末态温度<br><span class="hljs-attribute">IN</span>.PSP1 = Si.SG15.PBE.UPF<br><span class="hljs-attribute">XCFUNCTIONAL</span> = PBE<br><span class="hljs-attribute">Ecut</span> = <span class="hljs-number">50</span><br><span class="hljs-attribute">MP_N123</span> = <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>TDDFT</p><p>附录A： 注意, JOB=TDDFT 需要 TDDFT_DETAIL, MD_DETAIL。</p><p>TDDFT_DETAIL = m1 m2 mstate</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>第一性原理热电性质的计算流程</title>
    <link href="/2025/06/25/%E7%AC%AC%E4%B8%80%E6%80%A7%E5%8E%9F%E7%90%86%E7%83%AD%E7%94%B5%E6%80%A7%E8%B4%A8%E7%9A%84%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B/"/>
    <url>/2025/06/25/%E7%AC%AC%E4%B8%80%E6%80%A7%E5%8E%9F%E7%90%86%E7%83%AD%E7%94%B5%E6%80%A7%E8%B4%A8%E7%9A%84%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/opus/627044583608112676/?from=readlist">vaspkit+ShengBTE 计算热电优值（ZT值）教程（笔记）01</a></p><p><a href="http://vaspkit.cn/index.php/67.html">基于玻尔兹曼输运理论计算输运性质基于玻尔兹曼输运理论计算输运性质:vaspkit -task 68</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MSforLinux</title>
    <link href="/2025/06/16/MSforLinux/"/>
    <url>/2025/06/16/MSforLinux/</url>
    
    <content type="html"><![CDATA[<h1>1、安装（无网关版）</h1><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo yum install -y glibc* compat* libgcc* libsrdc* redhat* csh*<br></code></pre></td></tr></table></figure><p>解压安装包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf MS安装包名称<br></code></pre></td></tr></table></figure><p>进入文件夹执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./install<br></code></pre></td></tr></table></figure><p>一直回车最后输入：99</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-number">99</span>) Finished <span class="hljs-keyword">with</span> license <span class="hljs-keyword">configuration</span><br></code></pre></td></tr></table></figure><p>找到文件包里面的msi.lic修改License</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/home/</span>....<span class="hljs-regexp">/BIOVIA/</span>BIOVIA_LicensePack/Licenses<br></code></pre></td></tr></table></figure><p>将第一行</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">SERVER</span></span> ... ANY <span class="hljs-number">27000</span><br></code></pre></td></tr></table></figure><p>中的…修改为本机名称</p><p>进入</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/home/</span>....<span class="hljs-regexp">/BIOVIA/</span>BIOVIA_LicensePack<span class="hljs-regexp">/linux/</span>bin<br></code></pre></td></tr></table></figure><p>执行安装</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">.<span class="hljs-regexp">/lp_install ~/m</span>si.lic<br></code></pre></td></tr></table></figure><p>完毕！</p><h1>2、文件上传</h1><p>在windows下运行数据以file文件保存，复制到服务器硬盘中。</p><h1>3、模块运行（以DMOL3为例）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#!bin/bash</span><br>MS_TNSTALL_PATH=/public/home/m2022220095/software/BIOVIA/MaterialsStudio20.1 <span class="hljs-comment">#MS文件位置 设置为安装的位置</span><br><br><span class="hljs-built_in">cp</span> /public/home/m202220095/LF/feiduichen2 <span class="hljs-comment">#进入工作文件</span><br><br>DMOL3_SCRIPT=<span class="hljs-variable">$MS_TNSTALL_PATH</span>/etc/DMol3/bin/RunDMol3.sh<br><span class="hljs-comment">#运行脚本赋值给DMOL3_SCRIPT 此脚本是在MS安装位置中存在的 根据需求不一样进行修改 此处为DMOl3模块</span><br><br><span class="hljs-variable">$DMOL3_SCRIPT</span> feiduichen2 <span class="hljs-comment">#运行的文件名称</span><br><br><span class="hljs-comment">##注：其实上面两行类似于RunnDmol3.sh（模块脚本） ferduichen2（运行文件）</span><br><span class="hljs-comment">#进入要运行的文件内，运行模块。</span><br></code></pre></td></tr></table></figure><h1>4、下载查看</h1><p>在文件夹中*.outmol即运行结果数据。</p><h1>参考文献:</h1><p>1、<a href="https://www.bilibili.com/video/BV1ym4y187gt/?spm_id_from=333.1391.0.0&amp;vd_source=540d345d77e419a2edba970d89ad58ba">十分钟搞定MS在Linux服务器上的安装 | Materials Studio Linux版于集群、超算、高性能计算中心的安装 | MS杨站长 华算科技</a></p><p>2、<a href="http://bbs.keinsci.com/thread-14926-1-1.html">Materials Studio for linux 库文件分享</a></p><p>3、<a href="http://bbs.keinsci.com/thread-1405-1-1.html">在CentOS上安装MS8.0的详细过程</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Install</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>线性代数的本质-3Blue1Brown</title>
    <link href="/2025/06/02/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8-3Blue1Brown/"/>
    <url>/2025/06/02/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8-3Blue1Brown/</url>
    
    <content type="html"><![CDATA[<h1>一、序言</h1><p>There is hardly any theory which is more elementary than linear algebra. in spite of the fact that generations of professors and textbook writers have obscured its simplicity by preposterous calculations with matrices. - Jean Dieudonne</p><p>Geometric intuition</p><p>Chapter 1 : Vectors . what even are they ?<br>Chapter 2 : Linear combinations, span and bases</p><p>Chapter 3 : Matrices as linear transformations</p><p>Chapter 4: Matrix multiplication as composition</p><p>Chapter 5: The determinant(Det )</p><p>Chapter 6： Inverse matrices， column space and null space</p><p>Chapter 7: Dot products and cross products</p><p>Chapter 8: Change of basis</p><p>Chapter 9: Eigen vectors and eigen values</p><p>Chapter 10: Abstract vector spaces</p><p>The introduction of numbers as coordinates is an act of violence – Hermann Weyl</p><p>数字列表</p><p>方向、长度</p><p>向量加法(等价)与数乘（缩放Scaling）Scalars</p>]]></content>
    
    
    
    <tags>
      
      <tag>Cal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python拟合曲线</title>
    <link href="/2025/05/29/python%E6%8B%9F%E5%90%88%E6%9B%B2%E7%BA%BF/"/>
    <url>/2025/05/29/python%E6%8B%9F%E5%90%88%E6%9B%B2%E7%BA%BF/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/bin/python</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np <span class="hljs-comment">#python科学计算库</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt <span class="hljs-comment">#python绘图库</span><br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd <span class="hljs-comment">#数据分析支持库</span><br><br><span class="hljs-comment">############import data##########</span><br><br><span class="hljs-comment">##############以数组形式赋值#########</span><br>x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br>y = np.array([<span class="hljs-number">9.5</span>,<span class="hljs-number">10.2</span>,<span class="hljs-number">11.7</span>,<span class="hljs-number">12.8</span>,<span class="hljs-number">13.0</span>])<br><span class="hljs-comment">#######以列表形式赋值###########</span><br><span class="hljs-comment"># data = pd.read_csv(&#x27;1.txt&#x27;, sep = &#x27;\t&#x27;)</span><br><span class="hljs-comment"># x = data.iloc[:, 1]</span><br><span class="hljs-comment"># y = data.iloc[:, 2]</span><br><br><span class="hljs-comment">###########polyfit###############</span><br>slope , intercept = np.ployfit(x , y, <span class="hljs-number">1</span>) <span class="hljs-comment"># 最小二乘法多项式拟合np.ployfit（x, y, deg），返回数组，此时deg为1，得数组array([x的系数 ， 常数项])</span><br><br><span class="hljs-comment">###########绘制、可视化#################</span><br>plt.scatter(x,y)<span class="hljs-comment">#绘制散点图</span><br>plt.plot(x , slope * x + intercept , color = <span class="hljs-string">&#x27;red&#x27;</span>)<span class="hljs-comment">#绘制曲线</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;slope = &quot;</span> , slope) <span class="hljs-comment">#输出打印数据</span><br>plt.show() <span class="hljs-comment">#显示</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>2.5D-Unity项目学习1</title>
    <link href="/2025/05/23/2-5D-Unity%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A01/"/>
    <url>/2025/05/23/2-5D-Unity%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A01/</url>
    
    <content type="html"><![CDATA[<h1>1、版本</h1><p>Unity : 2023.1.4f1，3D(URP)</p><h1>2、创建</h1><p>取消版本管理</p><p>Unity package manager Error</p><p><a href="https://zhuanlan.zhihu.com/p/372238831">enter safe mode</a></p><p>将引擎重装之后就不再报错了。</p><h1>3、环境安装</h1><p>在<code>Window - Package Manager - +号 - install package from git URL... + com.unity.ide.vscode</code>安装</p><p>在<code>Edit - Preferences - External Tools - External Script Editor</code>设置外部ide编辑器</p><p>在<code>Window - Package Manager - Unity Registry</code> 安装<code>input System</code>，重启unity。</p><h1>4、角色控制</h1><h2 id="1、预设">1、预设</h2><p><code>Edit - project Setting - Plyer -configuration -Active Input Handing -</code>有input System Package (New)等三个选项，此处选择<code>both</code>。</p><p>在Assets 文件夹下新建文件夹input setting，用于存放角色控制代码。</p><p><code>Creat - Input Actions</code>创建，双击文件，在<code>Action Maps</code>加号添加命名为<code>Player</code>，将<code>Actions</code>中的<code>New Action</code>命名为<code>Move</code>，设置<code>Action Type</code>为<code>Pass Through</code>，<code>Control Type</code> 为<code>Vector 2 </code>，右键<code>Move</code>添加<code>Add Down/up...</code>，注：此处的自动生成的Banding要删除。将<code>2D vector</code>中的Up Donw…中的<code>Path</code> 设置为相应的健，退出保存，单击<code>PlayerControls</code>将<code>Generate C# Class</code>勾选上，点击<code>Apply</code>。</p><p>在<code>Assets</code>文件夹下创建文件夹，命名为<code>Scripts</code>，用于存放代码。</p><p>在内创建一个控制脚本<code>PlayerControll</code>代码：：</p><p>在Sample Scene 里面<code>Create Empty</code>，命名为<code>Player</code></p><p>将<code>PlayerControll</code>拖入<code>Player</code>中，完成测试。</p><h2 id="2-、移动">2 、移动</h2><p>创建<code>Plane</code>以及<code>Capsule</code>(在Player上)</p><p>修改playerControll代码</p><p>什么是SerializeField</p><p>normalized的作用</p><p>代码完成后，修改speed的值，在<code>Player</code>上添加刚体（Rigidbody）组件。</p><p>出现：</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smali">NullReferenceException: Object reference<span class="hljs-built_in"> not </span>set to an<span class="hljs-built_in"> instance </span>of an object<br>PlayerControll.FixedUpdate () (at Assets/Scripts/PlayerControll.cs:32)有数值即为报空。<br></code></pre></td></tr></table></figure><p><code>Rigidbody</code>中的<code>constrains</code>可以限制旋转以及坐标变化，2.5D中限制旋转。</p><p>代码：</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">private</span> PlayerControls controls;<span class="hljs-comment">//定义PlayerControls</span><br><span class="hljs-keyword">private</span> Vector3 movement;<span class="hljs-comment">//定义一个三维坐标</span><br><span class="hljs-keyword">private</span> Rigidbody rb;<span class="hljs-comment">//定义一个Rigidbody</span><br>[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> speed;<span class="hljs-comment">//定义一整数。</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>()</span><br>&#123;<br>    controls = <span class="hljs-keyword">new</span> PlayerControls();<span class="hljs-comment">//创建一个新的PlayerControls</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEnable</span>()</span><br>&#123;<br>    controls.Enable();<span class="hljs-comment">//启用PlayerControls</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> ()</span><br>&#123;<br>    rb = gameObject.GetComponent&lt;Rigidbody&gt;();<span class="hljs-comment">//获取Rigidbody组件</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>&#123;<br>    <span class="hljs-built_in">float</span> x = controls.Player.Move.Readvalue&lt;Vector2&gt;().x;<span class="hljs-comment">//x改变量</span><br>    <span class="hljs-built_in">float</span> y = controls.Player.Move.Readvalue&lt;Vector2&gt;().y;<span class="hljs-comment">//y改变量</span><br>    movement = <span class="hljs-keyword">new</span> Vector3(x,<span class="hljs-number">0</span>,y).normalized;<span class="hljs-comment">//赋值给三维坐标</span><br>    <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FixUpdate</span>()</span><br>&#123;<br>    rb.MovePosition(tranform.position + movement * speed * Time.DetalTime);<span class="hljs-comment">//刚体组件进行移动</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3、下载素材">3、下载素材</h2><p>在<code>Window - Package Manager - Unity registry</code>中搜索<code>sprit 2D</code>下载</p><p>Unity package 导入：选择菜单栏中的<strong>Assets</strong> &gt; <strong>Import Package</strong> &gt; <strong>Custom Package</strong>。</p><p>将要使用的的素材拖入<code>player</code>即可使用。</p><h2 id="4、Cinemachine">4、Cinemachine</h2><p>使得相机跟随角色。</p><p>安装<code>Cinemachine</code></p><p>右键创建<code>Virtual Camera</code>，在其<code>follow</code>中拖入要跟随的角色，并使得<code>Transform rotation</code>到合适的位置，<code>follow offset</code>为距离<code>player</code>的数值。</p><p>视角抖动问题：在<code>main camera</code>中<code>CinemachineBrain</code>的<code>Update method</code>改为<code>Fixed Update</code>。</p><h2 id="5、添加动画">5、添加动画</h2><p>创建动画：<code>Window - Animation - Animation</code>点击其中的<code>create</code>选择自定义的保存位置。</p><p>其中的<code>samples</code>可以设置帧数，每帧拖入图片素材即可。</p><p><code>curve</code>可以使得both Tangents constant 使其两个图案恒定改变。</p><p>注：Transform 与 RectTransform的区别</p><p><a href="https://zhuanlan.zhihu.com/p/357525446">2D中角色方向切换的三种方式</a></p><p>1、设置Scale为负值</p><p>2、tranform.eulerAngles = new Vector3(0,180,0);</p><p>3、</p><p>4、使用sprite filp</p><h2 id="6、地形">6、地形</h2><p>创建<code>3DObject - Terrai</code>，在<code>Terrain setting</code>（第五个选项卡）中的<code>Mesh resolution</code>中可以设置地形大小，设定<code>Transform</code>到合适位置。</p><p>第一个选项卡<code>Create Neighbor Terrains</code>：可在边缘处创建重复的地形。</p><p>第二个选项卡<code>Paint Terrain</code>:<code>set height</code>设置地形高度。<code>paint hole</code>设置孔洞。<code>Raiser and Lower Terrain</code>单击地形上升，按住<code>shift</code>单击地形下降。<code>smooth height</code>高度之间进行插值。</p><p><code>paint Texture</code>:添加地形材质。<code>Edit Terrian Layers - create layer</code>选择需要材质添加，即可使用素材贴图。</p><p>第四个选项卡<code>paint Details - Edit Details</code>可以增加场景细节以及草的模型。</p><p>第五个选项卡<code>Terrain Setting - Wind setting for Grass(On Terrain Data)</code>设置风的大小。</p><h2 id="7-、触发器">7 、触发器</h2><p>新建<code>Empty</code>，添加<code>Box Collider</code>用于触发，修改<code>size</code>改变范围。</p><p>控制触发的脚本，碰撞检测</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">//在Box Collider组件中将Is Trigger勾选</span><br>[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> LayerMask grass; <br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">FixedUpate</span>(<span class="hljs-params">）</span></span><br><span class="hljs-params"><span class="hljs-function">&#123;</span></span><br><span class="hljs-params"><span class="hljs-function">    Collider[] colliders = Physics.OverlapSphere(transform.position,<span class="hljs-number">1</span>,grass</span>)</span>;<span class="hljs-comment">//将碰撞存入数组 </span><br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8、动画状态机">8、动画状态机</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#">\\代码对于动画的控制<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> Animator anim;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> IS_WALK = <span class="hljs-string">&quot;1_Move&quot;</span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>&#123;<br>    anim.setBool(IS_WALK,<span class="hljs-literal">true</span>);<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="9、在动画播出时禁止位移">9、在动画播出时禁止位移</h2><p><a href="https://blog.csdn.net/u013700908/article/details/52888792">Physics.OverlapSphere</a></p><h2 id="10、GameObject与gameObject">10、GameObject与gameObject</h2><p>层级中的任意物品都是GameObject</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function">New <span class="hljs-title">GameObject</span>(<span class="hljs-params"><span class="hljs-string">&quot;Cube&quot;</span></span>)</span>;<br><span class="hljs-function">New <span class="hljs-title">GameObject</span>().name</span> = <span class="hljs-string">&quot;Cube&quot;</span>;<br></code></pre></td></tr></table></figure><p>运行代码，会在层级列表中新建一个名为<code>Cube</code>的Enpyt，在内存在一个Transform组件。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#">GameObject.CreatePrimitive(PrimitiveType.Cube);<br></code></pre></td></tr></table></figure><p>创建一个<code>Cube</code>实体。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#">GameObject.CreatePrimitive(PrimitiveType.Cube).name = <span class="hljs-string">&quot;Body&quot;</span>;<span class="hljs-comment">//命名为Body</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> GameObject obj;<span class="hljs-comment">//声明变量，此声明的变量会在挂载代码处显示。</span><br>obj = GameObject.Find(<span class="hljs-string">&quot;ABC&quot;</span>);<span class="hljs-comment">//查找层级列表中为ABC的物体</span><br><span class="hljs-comment">//#####################注意####################Find函数消耗性能</span><br></code></pre></td></tr></table></figure><p>实现效果：在层级列表中查找名为ABC的物块，并自动绑定到obj。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#">obj = GameObject.FindWithTag(<span class="hljs-string">&quot;Player&quot;</span>);<span class="hljs-comment">//寻找标签为Player的物体</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> GameObject[] obj;<span class="hljs-comment">//创建数组</span><br>obj = GameObject.FindGameObjectsWithTag(<span class="hljs-string">&quot;Player&quot;</span>);<span class="hljs-comment">//所有带player标签的物体放到Player中，所以需要数组。</span><br>obj = GameObject.FindGameObjectWithTag(<span class="hljs-string">&quot;Player&quot;</span>);<span class="hljs-comment">//查找单个，多个物体时默认为最上面的物体</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> Camera obj;<br>obj = GameObject.FindObjectOfType&lt;Camera&gt;();<span class="hljs-meta">#查找组件Camera并赋给obj</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> GameObject obj1;<br><span class="hljs-keyword">public</span> GameObject obj2;<br><span class="hljs-built_in">bool</span> A = GameObject.Equals(obj1,obj2);<span class="hljs-comment">//判断是否为同一物体，若是返回True，否则为false</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c#">GameObject.Destroy(obj);<span class="hljs-comment">//销毁obj</span><br>GameObject.DontDestroyOnLoad(obj);<span class="hljs-comment">//在加载下一个场景之前不进行销毁</span><br><br></code></pre></td></tr></table></figure><p>gameObject:代表代码挂载所在的物体</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> Collider cold;<br>cold = gameObject.GetComponent&lt;Collider&gt;();<span class="hljs-comment">//获取物块身上的Collider组件，赋值到cold变量中。</span><br>cold = GetComponent&lt;Collider&gt;();<span class="hljs-comment">//通常可以省略gameObject</span><br>cold = obj.GetComponent&lt;Collider&gt;();<span class="hljs-comment">//获取obj上面的Collider组件</span><br>cold = gameObject.GetComponentInParent&lt;Collider&gt;();<span class="hljs-comment">//获得挂载此代码的物体的父物体的Collider组件</span><br>cold = gameObject.GetComponentInChildren&lt;Collider&gt;();<span class="hljs-comment">//获得挂载此代码的物体的子物体的Collider组件</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#">gameObject.layer = <span class="hljs-number">0</span>;<span class="hljs-comment">//改成一号图层</span><br>gameObject.tag = <span class="hljs-string">&quot;Player&quot;</span>;<span class="hljs-comment">//改Player标签</span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#">gameObject.isStatic = <span class="hljs-literal">true</span>;<span class="hljs-comment">//将Static改为启动</span><br>gameObject.SetActive(<span class="hljs-literal">true</span>);<span class="hljs-comment">//启用物体</span><br></code></pre></td></tr></table></figure><h2 id="11、常用函数">11、常用函数</h2><h3 id="1、Unity引擎中基类MonoBehaviour的回调函数">1、Unity引擎中基类<code>MonoBehaviour</code>的回调函数</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">private</span><span class="hljs-keyword">void</span> <span class="hljs-title">FixedUpadate</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LateUpadate</span>()</span><br></code></pre></td></tr></table></figure><h4 id="1、private-void-Awake">1、private void Awake()</h4><p>当控制脚本的gameObject被加载的时候调用，一般用于初始化变量和游戏状态。</p><p>在实例的生命周期中仅被调用一次，不能做<strong>协程</strong></p><h4 id="2、private-void-Start">2、private void Start()</h4><p>初始化函数，在Awake运行完毕之后，在所有Update函数之前，一般用于给变量赋值。</p><h4 id="3、private-void-Upate">3、private void Upate()</h4><p>在Start函数后，每一帧执行一次。</p><h4 id="4、private-void-FixedUpdate">4、private void FixedUpdate()</h4><p>固定的帧（0.02秒）执行一次，一般用于</p><h4 id="5、private-void-LateUpdate">5、private void LateUpdate()</h4><p>在每帧执行完毕后调用，适用于命令脚本的执行（相机的跟随等）</p><p>注：将层级中的任意的gameObject拖到资源管理器中都称作一个预制体(prefab)</p><h3 id="2、游戏状态函数">2、游戏状态函数</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnApplicationFocus</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> focus</span>) <span class="hljs-comment">//对焦失焦，检测是否停留在App界面，是or否</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnApplicationPause</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> Pause</span>)<span class="hljs-comment">//游戏是否暂停，注意Pause == True需要进一步设置</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnApplicationQuit</span>()<span class="hljs-comment">//游戏退出</span></span><br></code></pre></td></tr></table></figure><p>启动游戏的时候，先进行取消暂停，然后再进行对焦。</p><p>退出游戏的时候，先失去焦点，再退出游戏。</p><p>回到游戏的时候，先对焦，再暂停。</p><p>强制暂停的时候，先暂停，后对焦。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBcameInvisible</span>()<span class="hljs-comment">//物体离开摄像头时执行</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBcameVisible</span>() <span class="hljs-comment">//物体进入摄像头时执行</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEnable</span>()<span class="hljs-comment">//脚本启用</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDisable</span>()<span class="hljs-comment">//脚本禁用</span></span><br><span class="hljs-function"><span class="hljs-comment">//以上在脚本禁用以及物品启用禁用。</span></span><br><span class="hljs-function">    </span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> OnDestroy<span class="hljs-comment">//销毁</span></span><br></code></pre></td></tr></table></figure><p>执行顺序<code>Awake - OnEnable - Start</code></p><p>与碰撞有关的函数</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//碰撞体进入触发器 isTrigger 触发器是Collider的一个参数 调用</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerStay</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//进入触发器后每一帧调用一次</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerExit</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//没有触碰时候</span></span><br><span class="hljs-function">    </span><br><span class="hljs-function">    </span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionEnter</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//碰撞体进入触发器 触发器是Collider的一个参数 调用</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionStay</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//进入触发器后每一帧调用一次</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionExit</span>(<span class="hljs-params">Collider collision</span>)<span class="hljs-comment">//没有触碰时候</span></span><br></code></pre></td></tr></table></figure><p>与Box Collider组件息息相关，</p><p>OnMouse函数</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseDown</span>()<span class="hljs-comment">//按下激活</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseUp</span>()<span class="hljs-comment">//松开激活</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseDrag</span>()<span class="hljs-comment">//拖动激活</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseEnter</span>()<span class="hljs-comment">//进入激活</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseExit</span>()<span class="hljs-comment">//离开激活</span></span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseOver</span>()<span class="hljs-comment">//保持在，鼠标放在某个物品上的时候</span></span><br><span class="hljs-function"></span><br></code></pre></td></tr></table></figure><p>高亮用highlight组件实现</p><p>渲染相关：注意有些只会被相机调用</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs clean">private void OnWillRanderObject()<span class="hljs-comment">//[0]</span><br><br>private void OnRanderObject()<span class="hljs-comment">//相机渲染完毕，OnPostRender()执行完毕，在进行执行。[4 ]</span><br><br>##########在相机中才可用#############<br>private void OnPostRender()<span class="hljs-comment">//相机渲染完毕，进行执行 [3]</span><br>private void OnPerRender()<span class="hljs-comment">//相机渲染之前执行 [2]</span><br>private void OnPreCull()<span class="hljs-comment">// 相机移动过程之中 [1]</span><br><br>private void OnRenderImg(RenderTexture source , RamderTexture destination)[<span class="hljs-number">5</span>]<br>private void OnGUI()[<span class="hljs-number">6</span>]<br><br></code></pre></td></tr></table></figure><h2 id="12、简单跟随">12、简单跟随</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> GameObject target;<br>[<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">float</span> distance;<br>[<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">float</span> energySpeed;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span><br>&#123;<br>    target = GameObject.FindGameObjectWithTag(<span class="hljs-string">&quot;Player&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>&#123;<br>    follow();<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">follow</span>()</span><br>&#123;<br>   <span class="hljs-keyword">if</span> (Math.abs(gameObject.transform.position.x - target.transform.position.x) &lt; distance)<br>   &#123;<br>       transform.position = Vector3.MoveTowards(transform.position,target.transform.position,energySpeep*Time.deltaTime);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13、攻击增加碰撞体">13、攻击增加碰撞体</h2><p>在已施加动画的物体中增加一个空物体孩子，并在其中添加一个不生效的Coillder，在动画机（Animator）中选择动画，选择施加动画的物体，逐帧录制合适的条件时启用Coillder并改变为合适的大小。</p><p><strong>注意：脚本外部名称和内部类名称要一致</strong></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>本网站如何搭建</title>
    <link href="/2025/05/22/%E6%9C%AC%E7%BD%91%E7%AB%99%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/05/22/%E6%9C%AC%E7%BD%91%E7%AB%99%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1>1、需要的软件与账号</h1><h2 id="1、软件">1、软件</h2><p><a href="https://nodejs.org/zh-cn">Node.js</a>和<a href="https://git-scm.com/downloads">Git</a></p><p>注：1、在cmd中git -v 、node -v 检查版本，确认安装完成。</p><p>2、Git的使用：任意目录空白下鼠标右键点击弹出菜单，点击“Open Git Bash here”即可，下文称“打开Git”</p><h2 id="2、账号与GitHub-Page仓库">2、账号与GitHub Page仓库</h2><p>注册<a href="https://github.com/">github</a>账号</p><p>打开Git输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.name <span class="hljs-string">&quot;输入GitHub用户名&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;输入GitHub邮箱&quot;</span><br></code></pre></td></tr></table></figure><p>创建SSH密钥，供Github账号连接使用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t rsa -C <span class="hljs-string">&quot;输入GitHub邮箱&quot;</span><br></code></pre></td></tr></table></figure><p>密钥文件存储在：<code>C：\users\用户名\ .shh</code> 中，记事本打开文件<code>id_rsa.pub</code>复制。</p><p>登录GitHub，进入<code>setting - SSH and GPG keys</code>点击<code>New SSH Key</code>，随便输入<code>title</code>，将复制的密钥粘贴到<code>Key</code>中，点击<code>Add SSH Key</code>添加。</p><p>打开Git，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -T git@github.com <br></code></pre></td></tr></table></figure><p>出现<code>Are you sure you want to continue conncting (yes/no)</code>输入<code>y</code>。</p><p>出现<code>Hi xxx! You've successfully authenticated,...</code>结束。</p><p>Github pages 仓库</p><p>在Github中创建<code>New repository</code>，Respository name输入为<code>你的用户名.github.io</code><strong>注：他人访问网站也是这个网址</strong>，勾选<code>Initialize this repository with a README</code>，点击<code>Create repository</code>，结束，至此分别进行了GitHub账号的配备、Git软件与Github账号的链接。</p><h2 id="3、安装Hexo">3、安装Hexo</h2><p>在本机任意目录下创建存放Hexo的文件夹，在文件夹内打开Git输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>进行下载安装，等待完成。</p><h1>2、部署与测试</h1><h2 id="1、Hexo初始化与调试">1、Hexo初始化与调试</h2><p>在存放Hexo的文件夹下打开Git，初始化输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init<br></code></pre></td></tr></table></figure><p>组件安装输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install<br></code></pre></td></tr></table></figure><p>用Git生成页面输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo g<br></code></pre></td></tr></table></figure><p>本地预览：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo s</span><br></code></pre></td></tr></table></figure><p>出现<code> Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</code>，在浏览器打开<code> http://localhost:4000/</code>即可在本地预览页面。<code>Ctrl+C</code>退出本地部署。</p><h2 id="2、部署">2、部署</h2><p>安装部署工具<code>hexo -deployer-git</code>输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>在存放Hexo的文件夹内有名为<code>_config.yml</code>的文件，修改底部的Deployment为：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repo:</span> git@github.com:你的用户名/你的用户名.github.io.git<br><span class="hljs-symbol">  branch:</span> master<br></code></pre></td></tr></table></figure><p>保存完成后，输入</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo d</span> <br></code></pre></td></tr></table></figure><p>进行部署到GitHub。结束。</p><h1>3、基本功能</h1><h2 id="1、内容发布">1、内容发布</h2><p>所有要发布的内容都是基于markdown编写，文件后缀名<code>.md</code>，保存在<code>存放Hexo文件夹 - source - _posts</code>目录内。打开Git，进入此目录输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new 你的文件名称<br></code></pre></td></tr></table></figure><p>将会在此目录下创建一个名为<code>你的文件名称.md</code>的markdown文件，用<code>Typora</code>等编辑软件即可编辑。</p><p>在存放Hexo文件夹下输入<code>hexo g</code>生成页面所需文件，输入<code>hexo d</code> 进行发布到GitHub。</p><h2 id="2、-config-yml进行网站设置">2、<code>_config.yml</code>进行网站设置</h2><p>注：在存放Hexo的目录下与更换主题后的<code>themes</code>文件夹下都存在一个_config.yml。</p><h2 id="3、主题的更换">3、主题的更换</h2><p>在存放Hexo的目录下输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> 主题网址<br></code></pre></td></tr></table></figure><p>下载主题。</p><p>将_config.yml中的theme字段改为主题名称：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">theme:</span> 主题名称<br></code></pre></td></tr></table></figure><p>进行生成、发布即可更换主题。</p><h1>参考文献</h1><p>1、<a href="https://zhuanlan.zhihu.com/p/60578464">使用 Hexo+GitHub 搭建个人免费博客教程（小白向）</a></p><p>2、<a href="https://hexo.io/zh-cn/docs/data-files">hexo文档</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>test</title>
    <link href="/2025/05/22/test/"/>
    <url>/2025/05/22/test/</url>
    
    <content type="html"><![CDATA[<p>pdf:</p><div class="row">    <embed src="https://goodog0.github.io/file/test.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
    <categories>
      
      <category>-关于test</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>一些网站及其介绍</title>
    <link href="/2023/10/12/%E4%B8%80%E4%BA%9B%E7%BD%91%E7%AB%99%E5%8F%8A%E5%85%B6%E4%BB%8B%E7%BB%8D/"/>
    <url>/2023/10/12/%E4%B8%80%E4%BA%9B%E7%BD%91%E7%AB%99%E5%8F%8A%E5%85%B6%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="1、大师兄">1、<a href="https://www.bigbrosci.com">大师兄</a></h2><h2 id="2、晶体学网站">2、<a href="https://www.materialsproject.org">晶体学网站</a></h2><p>一些晶体的模型参数，但是由于网络原因，直接连站点读取会很慢。</p><h2 id="3、b站">3、<a href="https://www.bilibili.com">b站</a></h2><h2 id="4、vasp官网说明手册">4、<a href="https://www.vasp.at/wiki/index.php/The_VASP_Manual">vasp官网说明手册</a></h2><h2 id="5、学术镜像网站">5、<a href="https://ac.scmor.com/">学术镜像网站</a></h2><h2 id="6、文献下载网站1">6、<a href="https://sci-hub.ru/">文献下载网站1</a></h2><h2 id="文献下载网站2"><a href="https://sci-hub.mksa.top/">文献下载网站2</a></h2><h2 id="文献下载网站3"><a href="https://www.scidown.cn/">文献下载网站3</a></h2><h2 id="7、其他">7、其他</h2><h2 id="Mixamo"><a href="https://www.mixamo.com/#/">Mixamo</a></h2><h2 id="菜鸟教程"><a href="https://www.runoob.com/">菜鸟教程</a></h2>]]></content>
    
    
    
    <tags>
      
      <tag>关于vasp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MarkDown的数学使用</title>
    <link href="/2023/10/05/MarkDown%E7%9A%84%E6%95%B0%E5%AD%A6%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/10/05/MarkDown%E7%9A%84%E6%95%B0%E5%AD%A6%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1>矩阵</h1><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">V = \begin {bmatrix}1&amp;8&amp;8\\5&amp;9&amp;11\\\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><h1>基本公式</h1><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><msup><mi>B</mi><mn>2</mn></msup><mo>+</mo><msup><mi>C</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">A = B^2 + C^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mi>C</mi><mi>B</mi></msubsup></mrow><annotation encoding="application/x-tex">A^{B}_C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1167em;vertical-align:-0.2753em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4247em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em;"><span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mrow><msup><mi>E</mi><mi>f</mi></msup><mo>−</mo><msup><mi>G</mi><mi>h</mi></msup></mrow><mrow><msup><mi>A</mi><mi>b</mi></msup><mo>−</mo><msup><mi>C</mi><mi>d</mi></msup></mrow></msubsup></mrow><annotation encoding="application/x-tex">A^{A^b-C^d}_{E^f-G^h}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.473em;vertical-align:-0.421em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0521em;"><span style="top:-2.3374em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.782em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.782em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.1031em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.927em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.927em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.421em;"><span></span></span></span></span></span></span></span></span></span></p><p>$\alpha \beta \gamma \epsilon \pi \delta \omega \theta $</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>α</mi><mn>1</mn></msub><mo>=</mo><msub><mi>β</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\alpha_{1} = \beta_{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">A</mi><mi mathvariant="normal">B</mi><mi mathvariant="normal">Γ</mi><mi mathvariant="normal">Δ</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">Θ</mi><mi mathvariant="normal">Π</mi><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Alpha \Beta \Gamma \Delta \Epsilon \Theta \Pi \Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathrm">AB</span><span class="mord">ΓΔ</span><span class="mord mathrm">E</span><span class="mord">ΘΠΩ</span></span></span></span></p><p>$\log \sin \cos \sec \ln \arcsin \arccos $</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mi>sin</mi><mo>⁡</mo></mrow><mn>2</mn></msup><mi>x</mi><mo>+</mo><msup><mrow><mi>cos</mi><mo>⁡</mo></mrow><mn>2</mn></msup><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\sin ^2 x + \cos ^2 x = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9552em;vertical-align:-0.0833em;"></span><span class="mop"><span class="mop">sin</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8719em;"><span style="top:-3.1208em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mop"><span class="mop">cos</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>5</mn></msqrt><mroot><mn>5</mn><mn>9</mn></mroot></mrow><annotation encoding="application/x-tex">\sqrt 5 \sqrt[9] 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;">5</span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7869em;"><span style="top:-2.9647em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">5</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>5</mn><mn>6</mn></mfrac><mn>8</mn><mi mathvariant="normal">/</mi><mn>9</mn></mrow><annotation encoding="application/x-tex">\frac 5 6  8/9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">8/9</span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>+</mo><msup><mi>B</mi><mn>2</mn></msup><mo>=</mo><msup><mi>C</mi><mn>2</mn></msup><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">A^2 + B^2 = C^2\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\int_{a}^{b} C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.511em;vertical-align:-0.9119em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.599em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>]]></content>
    
    
    <categories>
      
      <category>test</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CHG电荷</title>
    <link href="/2023/10/02/CHG%E7%94%B5%E8%8D%B7/"/>
    <url>/2023/10/02/CHG%E7%94%B5%E8%8D%B7/</url>
    
    <content type="html"><![CDATA[<h1>1、INCAR参数设置</h1><p>进行静态计算，</p><p>IBRION = -1 #不更新</p><p>LCHARG = .TRUE,#输入电荷</p><h1>2、其他</h1><p>主要是输入电荷图</p>]]></content>
    
    
    <categories>
      
      <category>test</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vasp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>INCAR参数的选择</title>
    <link href="/2023/09/29/INCAR/"/>
    <url>/2023/09/29/INCAR/</url>
    
    <content type="html"><![CDATA[<h1>INCAR参数的选择</h1><h2 id="1、ISTART">1、ISTART</h2><p>#控制生成初始波函数 0随机 1读取</p><h2 id="2、ICHARG">2、ICHARG</h2><p>#控制生产初始电荷密度 0 读取WAVE生成电荷 1从CHGCAR读取 2通过原子电荷密度叠加方法生成初始的猜测电荷密度</p><p>11 从CHA读取，并在自洽循环中保持不变，适用非自洽循环计算，如电子态密度的计算</p><h2 id="3、ISPIN">3、ISPIN</h2><p>#是否考虑自旋 1：非自旋极化 向上自旋和向下自旋的电子数量相等 适用于非磁性体系 2：自旋极化 磁性体系 如铁磁反铁磁</p><h2 id="4、PREC">4、PREC</h2><p>#计算精度的控制</p><h2 id="5、ALGO">5、ALGO</h2><p>#N ：DAV算法，收敛性好速度慢 V：RMM算法，收敛性差，速度快。 F：综合</p><p>结构偏离稳定结构多，建议用N，接近稳定结构可以用V</p><h2 id="6、NELM">6、NELM</h2><p>#自洽循环的最大次数 一般为100</p><p>过渡金属、带真空层、设置了自旋极化的体系，要增加到200、300若依旧不能收敛 调整其他参数</p><h2 id="7、EDIFF-1E-5">7、EDIFF = 1E-5</h2><p>#自洽收敛标准，单位为Ev，两次迭代的能量差相比，一般为-5，-6</p><h2 id="8、ENCUT-250">8、ENCUT = 250</h2><p>#平面波截断能 用多少个平面波去展开波函数 推荐ENMAX的 1.0-1.3倍</p><h2 id="9、IBRION-2-6">9、IBRION = 2 6</h2><p>#离子步弛豫算法 0：分子动力学模拟 1：准牛顿算法 2：共轭梯度算法 5：振动频率计算 6；弹性常数计算</p><p>一般为2 结构接近稳定 为1</p><h2 id="10、NSW-100">10、NSW = 100</h2><p>#选择1 为有限位移法</p><h2 id="11、NFREE-2">11、NFREE = 2</h2><p>#有限位移法的方法 两个差分点</p><h2 id="12、POTIM-0-015">12、POTIM = 0.015</h2><p>#差分法的步长</p><h2 id="13、ISIF-3">13、ISIF = 3</h2><p>#写成3 考虑晶胞的畸变对弹性常数的贡献<br>#原子位移 + 晶胞形变 对能量的影响 = 弹性常数</p><h2 id="14、EDIFFG-0-1">14、EDIFFG = -0.1</h2><p>#离子步弛豫收敛标准 正值为系统能量变化 负值为原子上残余力，多数用力的收敛标准 三维可以收敛到 -0.01到-0.03 低维可以收敛到-0.03 到 -0.05</p><h2 id="15、ISMEAR-0">15、ISMEAR = 0</h2><p>#设置展宽方法决定如何进行电子轨道分数的占据 1（默认） -5 -4 -3 -2 0 N 0为高斯方法 适用于导体、半导体绝缘体或不清楚导电性质的时候用。-5：四面体法 用于半导体和绝缘体</p><p>半导体用 -5（注意k点要大于5） 其他绝大部分用0</p><h2 id="16、SIGAM-0-1">16、SIGAM = 0.1</h2><p>#展宽宽度与ISMEAR联用 ev 默认为0.2</p><p>#####################</p><h2 id="NSWICHAGE">NSWICHAGE</h2><p>最大离子步数/分子动力学模拟步数</p><p>#####################</p><h2 id="ISIF">ISIF</h2><p>#3:全弛豫，绝大多数三维结构优化 2：固定体积的弛豫，适用于表面结构优化，微量掺杂体系的优化。 4：固定体积，形状可变的弛豫</p><p>复杂体系可以分步优化，即 2优化离子 6 优化晶胞 3优化离子和晶胞<br>######################</p><h2 id="AMIX">AMIX</h2><p>#设置自洽迭代循环中新旧电荷密度的混合比 一般为0.4 自洽迭代不收敛时可以降低此数值</p><p>#####################</p><h2 id="MAGMOM">MAGMOM</h2><p>#对于磁性材料设置初始原子磁矩 默认每个原子为1 对于有df轨道的原子需要根据核外电子排布设置相应值 可以设置每个原子的初始磁矩方向 正值为自旋向上 负值为自旋向下</p><p>#####################</p><h2 id="LDA-U">LDA+U</h2><p>#电子强关联能 #########</p><p>#####################</p><h2 id="IVDW">IVDW</h2><p>#范德华修正 10：DFT-D2 11：DFT-D3 表面吸附、弱相互作用占体系能量较大比例的体系 ： 分子晶体、层状结构体系</p><h2 id="LUSE-VDW">LUSE_VDW</h2><p>#范德华力计算方法 ########将修改DFT内的能量计算</p><p>#####################</p><h2 id="NELECT">NELECT</h2><p>#指定体系总电子数目，默认为POSCAR POTCAR 自动计算价电子数 ############</p><p>#####################</p><h2 id="LWAVE-LCHARG">LWAVE/LCHARG</h2><p>#是否输出波函数和电荷密度 TF</p><p>#####################</p><h2 id="NEDOS">NEDOS</h2><p>#态密度点个数</p><p>#####################</p><h2 id="LORBIT">LORBIT</h2><p>#总态密度投影 10 ：投影到 SPDF 11:投影到 s 、pypxpz</p><p>#####################</p><h2 id="RWIGSRWIGS">RWIGSRWIGS</h2><p>#控制分态密度强度 原子Wigner-seitz半径</p><p>#####################</p><p>NBANDS # 总能带数 通常不修改 光学性质计算设置为默认的三到四倍数</p>]]></content>
    
    
    <categories>
      
      <category>关于Vasp</category>
      
      <category>输入文件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vasp</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
